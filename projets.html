<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu Kaboom - Carré Joueur</title>
    <script src="https://unpkg.com/kaboom/dist/kaboom.js"></script>
</head>
<body>
<script>
    // Initialisation de Kaboom
    kaboom({
        width: window.innerWidth,
        height: window.innerHeight,
        background: [0, 0, 0], 
    });

    // Définir la gravité
    setGravity(2400);

    // Créer le sol statique
    add([
        rect(width(), 48),       // largeur = largeur du canvas
        pos(0, height() - 48),   // en bas du canvas
        color(255, 0, 255),        // sol vert
        area(),
        body({ isStatic : true }),
    ]);

    // Ajouter le joueur comme un carré
    const player = add([
        rect(48, 48),        // carré 48x48
        pos(120, 300),
        color(255, 165, 0),    // rouge
        area(),
        body()
    ]);
    
// Objet de sortie
const exit = add([
    rect(64, 64),
    pos(0, height() - 112),
    color(255, 0, 0),
    area(),
    "exit"
]);

// Quand le joueur touche la sortie
player.onCollide("exit", () => {
    // Sauvegarde la position actuelle
    localStorage.setItem("playerX", player.pos.x);
    localStorage.setItem("playerY", player.pos.y);

    // Retour au hub
    window.location.href = "index.html";
});



onUpdate(() => {
    camPos(player.pos);
    localStorage.setItem("playerX", player.pos.x);
    localStorage.setItem("playerY", player.pos.y);
});



    // Déplacement gauche / droite
    const SPEED = 200;
    onKeyDown("left", () => player.move(-SPEED, 0));
    onKeyDown("right", () => player.move(SPEED, 0));

    // Saut
    onKeyPress("space", () => player.jump());
</script>
</body>
</html>
